-- Table: cliente

-- DROP TABLE cliente;

CREATE TABLE cliente
(
  id serial NOT NULL,
  nome character varying,
  rg character varying,
  sexo character(1),
  endereco character varying,
  cpf character varying,
  telefone character varying,
  celular character varying,
  data_nasc date,
  margem numeric,
  salario numeric,
  data_cadastro timestamp with time zone,
  email character varying,
  cep character varying,
  ocupacao character varying,
  informacoes_adicionais text,
  CONSTRAINT pk_cliente PRIMARY KEY (id)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE cliente
  OWNER TO postgres;



select  c.id,sum(p.valor_parcela),extract(month FROM p.data_parcela)as mes from cliente c inner join financiamento f on f.cliente_id = c.id
inner join parcela p on p.id_financiamento = f.id  where c.id = 1 
group by c.id,mes
